@import 'compass/css3';
@import 'vars';
@import 'mixins';

.afisha {
  margin-bottom: 2em;

  &__content {
    margin: 0 0 1.5em;
  }

  .events {
    margin-bottom: 20px;
  }

  .event-thumb {
    overflow:hidden;
    height:128px;
    margin: 0 0 0.385em;
  }
}


.afisha_index .thumb {
  width: 272px;
  height: 128px;
  margin-bottom: .75em;
}

.event {
  &__title {
    font-size: 1.385em;
    font-weight: normal;
    margin: 0 0 .3em;

    .buy_ticket {
      margin-left: 1.5em;
    }
  }

  &__extra_info {
    font-size: 0.924em;
    margin-bottom: 0.25em;
    color: #666;
  }

  &__description {
    margin-bottom: 1.5em;

    p {
      margin: 0;
    }
  }

  &_date {
    font-size: 1.25em;
    margin: 1.5em 0 0;
    text-align: center;
    background: url(../i/title-stripe.png) 0 50% repeat-x scroll;

    span {
      padding: 0 0.75em;
      background: #f2f2f2;
    }
  }
}


.events_list {
  margin-bottom:30px;

  .event {
    position: relative;
    padding-left: 144px;
    margin-bottom: 3em;

    .title {
      font-size:1.38em;
      line-height:1.1;
    }
    
  }

  .thumb {
    float: left;
    position: relative;
    width: 128px;
    height: 84px;
    margin: 4px -100% 0 -144px;
  }
}

.event_list__item {
  position: relative;
  padding-left: 144px;
  margin-bottom: 3em;
}

.no_photo {
  display: block;
  position: absolute;
  width: 100%;
  height: 100%;
  background: #fff url(../i/photo_icon.png) 50% 50% no-repeat;
}

.afisha-filter {
  position: relative;
  margin-bottom: 1em;

  .tabs {
    margin-bottom: 0;

    &-item_state_current {
      @include border-radius(2px 2px 0 0);

      &:first-child {
        &:after {
          content: "";
          display: block;
          position: absolute;
          top: 100%;
          left: 0;
          width: 5px;
          height: 5px;
          background: $brand-blue;
        }
      }
    }
  }

  .event_types {
    padding: 0 6px;
  }

}

.schedule_types {
  position: relative;
  z-index: 1;
  padding: 1em;

  &:before {
    @include box-shadow(0 2px 4px rgba(0,0,0,.15));
    z-index: -2;
    background: $brand-blue;;
  }

  &__type {
    font-size: .9285em;
    display: inline;
    position: relative;
    padding: .4615em .7692em;

    &:before {
      @include border-radius(2px);
      content: "";
      display: block;
      position: absolute;
      z-index: -1;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    &_active {
      &:before {
        @include box-shadow(0 3px 10px rgba(0,0,0,.25));
        background: #fff;
      }
    }

    :link,
    :visited,
    .pseudo-link {
      color: #fff;
    }
  }

  &__link {
    @include transition(opacity .3s);

    position: relative;

    &:hover {
      @include opacity(.8);
      .schedule_types & {
        color: white;
      }
    }

    .schedule_types__type_active & {
      text-decoration: none;

      &,
      &:hover {
        .schedule_types & {
          @include opacity(1);
          color: #242424;
        }
      }
    }

  }
  
  .icon-calendar {
    background-position: 0 -16px;
    margin-right: .5em;
  }
}


.search:before,
.afisha-filter .schedule_types:before {
    content: "";
    display: block;
    position: absolute;
    z-index: -1;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: 2px;
}

.schedule__calendar {
  float: right;
  position: relative;
  z-index: 100;
  
  .pseudo-link,
  .icon-calendar {
    @include transition(opacity .3s);
    color: white;
  }

  &:hover {
    .pseudo-link,
    .icon-calendar {
      @include opacity(.8);
      color: white;
    }
  }
}

.event__schedule {
    width: 100%;
}
.event__schedule .even td {
    background: #f6f6f6;
}
.event__schedule__place,
.event__schedule__time {
    padding: 0.75em 0 0.25em 0.25em;
    vertical-align: top;
    border-bottom: 1px solid #e8e8e8;
}

.event_schedule_line:last-child .event__schedule__place,
.event_schedule_line:last-child .event__schedule__time {
    border: none;
}
.event__schedule__place {
    width: 40%;
}
.event__schedule__time {
    text-align: right;
}
.schedule__time__item {
    font-size: 0.924em;
    display: inline-block;
    margin: 0 0 0.5em 1.75em;
    line-height: 1.2;
}
.event__summary {
    margin-bottom: 1em;
    padding-right: 8.5em;
}
.event__vote {
    float: right;
    width: 100px;
    margin: 0 -8.5em 0 -100%;
    padding-top: .5em;
    text-align: center;
}
.event__vote .star-rating ol {
    margin: 0 0 0 -40px;
    padding: 0;
    width: 80px;
    height: 16px;
    position: relative;
    left: 50%;
}
.event__rating {
    margin-bottom: 2em;
}
.event__details {
    clear: both;
}
.event__trailer {
    height: 520px;
}

.event__trailer object,
.event__trailer iframe {
    display: block;
    width: 100%;
}
.event__visitor {
    float: left;
    margin: 0 1em 1.5em 0;
    text-align: center;
}

.schedule_wide .event__schedule__place,
.schedule_wide .event__schedule__time {
    width: 50%;
}

.events__item {
    position: relative;
    height: 315px;
}

.event-caption {
    position: absolute;
    bottom: 0;
    left: 0;
    height: 120px;
    width: 100%;
    padding: 1em;
    background: url('../i/black-70.png');
    background: rgba(0,0,0,.7);
    color: #fff;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}

.event-caption .event__title {
    font-size: 1.143em;
}

.event-caption :link,
.event-caption :visited,
.event-caption .event__extra_info,
.event-caption .dot {
    color: #fff;
}

.event-caption .event__description {
    max-height: 3em;
    overflow: hidden;
    text-overflow: ellipsis;
    margin: 0;
}

.event-caption {
    .buy_ticket {
        margin-top: 5px;
    }
}

.events__item .thumb {
    display: block;
    width: 100%;
    height: 100%;
    overflow: hidden;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    background-size: cover;
    background-position: 50% 0;
    
}

.show-all-link {
    padding-top: .714em;
}

.event-xtra {
    font-size: .86em;
    float: right;
    margin-left: 1.5em;
}

.event-xtra :link,
.event-xtra :visited {
    text-decoration: none;
}

.event__shot {
    width: 100%;
    min-height: 315px;
    margin-bottom: 1.5em;
}

.event__shot img {
    width: 100%;
}

.buy_ticket {
  @include rect(114px, 19px);
  @include inline-block;

  background: image-url("buy_ticket.png") 0 0 no-repeat;
  cursor: pointer;
  
  .event-caption & {
    background-position: 0 -38px;
  }

  &:hover {
    background-position: 0 -19px;
  }

}
